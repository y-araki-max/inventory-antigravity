# 現在のステータスと仕様書 (CURRENT_STATUS.md)

## 1. プロジェクト目的
在庫管理アプリ（Antigravity）の完全な「マスターデータ基準」への移行と、用語・計算ロジックの厳格化。

## 2. 絶対に守るべき鉄則 (Golden Rules)

### (1) 表示ロジックの原則
- **全商品表示**: 入出庫履歴（トランザクション）の有無に関わらず、`src/data.js` に定義された `PRODUCTS` マスタ全件を必ず表示する。
- **データなし時の挙動**: 該当日の取引データがない場合は、数値「0」を表示する。行自体を非表示にすることは禁止。

### (2) 用語の完全統一
以下の旧用語は使用禁止。ソースコード（変数名、コメント含む）および画面表示において新用語を徹底する。

| 旧用語 | 新用語 (正しい表記) |
| :--- | :--- |
| 特別作戦 | **オプショナル** |
| 競合商品 | **他社商品** |
| 質問10 | **Q10** |
| いん | **アミノ酸** |
| 有細胞子 | **有胞子** |
| エネルギー | **エナジー** |
| 受け取り入力 / 受取 | **出庫** (または出庫入力) |
| ボス / ぼす | **BOSS** |

### (3) 在庫計算式・ロジック
- **基本式**: `当日在庫 = 前日在庫 + 入庫 - 出庫`
- **起点**: CSVデータ（`multi_202601.csv`）に含まれる「1月末在庫」を初期在庫（ベースライン）とする。
- **運用開始想定**: 2026年2月1日を起点として計算および日別表示を行う。
- **サンプル扱い**: 「サンプル」は「出庫」の一種としてカウントし、在庫を減らす（`(サ)`表記で区別）。

### (4) UI/デザイン規定（在庫管理表）
- **日別推移表**: 商品詳細アコーディオン内に表示。
- **カレンダー配色**:
    - **土曜日**: <span style="color:blue">青文字</span> / 青系背景
    - **日曜日**: <span style="color:red">赤文字</span> / 赤系背景

## 3. 実装済み機能状況
- **集計画面 (`Aggregation.jsx`)**: 
    - マスタデータ(`PRODUCTS`)を主軸にループ処理を行うよう修正済み。
    - 選択した日付にデータがなくても全商品リストが表示される。
- **在庫管理表 (`InventoryTable.jsx`)**: 
    - 商品ごとのアコーディオン内に、2月1日からの日別在庫推移表を実装済み。
    - データ0件の場合でもカテゴリーおよび商品行が表示されるようガード処理を解除済み。
- **在庫ロジック (`useInventory.js`)**: 
    - CSV初期在庫とlocalStorageの入出庫データを統合し、日ごとの在庫を算出するロジックを実装済み。

## 4. 重要ファイル (Source of Truth)
- `frontend/src/data.js`: 用語・商品マスタの正解データ。
- `frontend/src/hooks/useInventory.js`: 在庫計算の中枢ロジック。
- `frontend/src/pages/InventoryTable.jsx`: 在庫管理表の表示コンポーネント。
- `frontend/src/pages/Aggregation.jsx`: 集計画面の表示コンポーネント。
