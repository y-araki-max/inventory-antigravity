# プロジェクト最終引き継ぎ書 (Strict v7)

**重要**: 本ドキュメントは 2026年2月17日時点の最終決定版（v7）です。
旧文書（v6以前）はすべて無効です。

## 1. 唯一の正解ルール (Single Source of Truth)

### カテゴリ定義 (`data.js`)
以下のカテゴリ構成を厳守してください。「オプショナル」や「予備」を復活させてはいけません。

| カテゴリ名 | 含まれる主な商品 |
|---|---|
| マルチ | 大ボトル, 小ボトル, プレミアム, アレケア... |
| ビタミン | ビタミンA, VB群, 葉酸... |
| ミネラル | カルマグ, 亜鉛, セレン... |
| **オプショナル①** | アンチ, プテロ, NMN, Q10, リポ酸 |
| **オプショナル②** | グアガム, シンバイオ, ビフィ, 有胞子 |
| **オプショナル③** | サンプロ, コラエラ, AG, NAG |
| **オプショナル④** | フォーカス, アミノ酸, オメガ, メモリー, コリン, 抹茶 |
| 他社商品 | エナジー, エグノリジン |
| 本, その他, その他2, カスタム | (既存通り) |

### 翻訳干渉対策
- `index.html` に `lang="ja" class="notranslate" translate="no"` を常設すること。
- これがないと Google Chrome の自動翻訳機能が React の DOM を破壊し、アプリがクラッシュします。

## 2. システム機能・ロジック

### 在庫表 (`InventoryTable.jsx`)
- **レイアウト**: 商品カード横並び（グリッド）形式。
- **機能**:
    - **在庫修正**: 実在庫入力による差分自動計算（`type: ADJUST` ログを生成）。
    - **メモ**: `localStorage` に商品ID紐付けで保存。
    - **ロット表示**: 最新の入庫ログから `lot` を抽出表示。
    - **発注点**: マスタデータの `reorderPoint` を表示。

### データロジック (`useInventory.js`)
- **初期在庫**: CSV（1月末時点）
- **履歴計算**: 2月1日以降の `localStorage` ログ（IN/OUT/ADJUST）を積み上げ計算。
- **注意**: `dailyHistory` 配列は廃止・簡略化されました（グリッド表示優先のため）。

## 3. 運用ルール
- データ修正が必要な場合は、DBを直接弄るのではなく、必ずアプリ上の「在庫修正」ボタンを使用すること。
- `data.js` の `id` や `name` を変更すると、過去のログと紐付かなくなるため変更禁止。

----
This document serves as the absolute reference for the project.
