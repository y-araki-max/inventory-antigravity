# プロジェクト最終引き継ぎ書 (Strict v10.2)

**重要**: 本ドキュメントは 2026年2月17日時点の最終決定版（v10.2）です。
表示ロジックの堅牢化を行い、「データが存在するのに表示されない」問題を根絶しました。

## 1. 唯一の正解ルール (Single Source of Truth)
- **マスタデータ駆動表示**: 在庫表（`InventoryTable`）は、APIやストレージのデータの有無に関わらず、**常に `data.js` の定義に基づいて商品カードを描画**します。
- データ読み込み中の場合やエラー時は、安全なデフォルト値（在庫0）で表示され、画面が真っ白になることはありません。
- **強制初期化**: v10.1 で導入されたキャッシュ強制排除・ストレージ初期化は維持されています。

## 2. システム機能・UI (Strict v10.2 Final)

### 月別アーカイブ機能 (Time Machine)
- **完全同期**: 表示月（プルダウン）を変更すると、在庫計算・カレンダー表示・履歴参照の全てがその月に厳格に切り替わります。
- **データ連動保証**: `useInventory.js` の依存配列修正により、月変更時の再計算が保証されています。

### データ管理
- **初期化ロジック**: `main.jsx` に `STRICT_V10_INITIALIZED` フラグによるガードレールを実装。
- **キャッシュ対策**: `index.html` の読み込みパスにバージョンクエリを付与し、古いキャッシュの読み込みを防止。

### その他
- マスタデータ、カテゴリ定義、翻訳無効設定は Strict v9.1 の内容を継承。

## 3. 運用ルール
- 初回アクセス時、画面が一度リロードされる場合があります（初期化処理のため正常です）。

----
This document serves as the absolute reference for the project (v10.2).
