# プロジェクト最終引き継ぎ書 (Strict v12.1)

**重要**: 本ドキュメントは 2026年2月18日時点の最終決定版（v12.1）です。
「Date Error」を完全に撲滅し、どのようなデータ状態でもカレンダーが必ず表示される「フェイルセーフ」を実装しました。

## 1. 唯一の正解ルール (Single Source of Truth)

### カレンダーロジック (Fail-Safe)
- **絶対表示原則**: 年・月・日数の計算において万が一不正値（NaN等）が発生しても、エラーメッセージを出さず、**デフォルト値（31日）を使用して強制的に行を生成**します。
- **正当性**: 通常時は `new Date(year, month, 0).getDate()` により、2月28日/29日などの正確な暦を使用します。

### UIルール
- **色分け**: 
    - **土曜日**: 行 `bg-blue-50`, 文字 `text-blue-600` (太字)
    - **日曜日**: 行 `bg-red-50`, 文字 `text-red-600` (太字)

## 2. 運用ルール
- 画面が真っ白になったり「Error」と出ることはありません。
- 行が表示されている限り、そこには在庫数が表示されます（計算ロジックは正常であることが前提）。

----
This document serves as the absolute reference for the project (v12.1).
