# プロジェクト最終引き継ぎ書 (Strict v8.3)

**重要**: 本ドキュメントは 2026年2月17日時点の最終決定版（v8.3）です。
旧文書（v8以前）はすべて無効です。

## 1. 唯一の正解ルール (Single Source of Truth)

### カテゴリ定義 (`data.js`)
- **オプショナル①〜④** への分割と **予備** の削除を厳守。
- 商品ID、名称、カテゴリのマッピングは `data.js` を正とする。

### マスタデータ
- 発注点・平均出庫はすべて `data.js` に実装済み。
- v8.3で エナジー, アンチ, プテロ, Q10, リポ酸 のデータを追加済み。

### 翻訳干渉対策
- `index.html` に `lang="ja" class="notranslate" translate="no"` を常設すること。

## 2. システム機能・UI (Strict v8.3 Enhanced)

### 在庫カード (`InventoryTable.jsx`)
- **マルチカレンダー展開**: 
    - 商品名クリックでカレンダーを展開。
    - **複数の商品を同時に展開可能**（閉じない限り維持される）。
- **ロット表示**:
    - **最新ロット（現在使用中）**: **赤字・太字** で表示。
    - **その他のロット**: 通常の黒字で表示（複数ロットある場合はリスト表示）。

### データロジック (`useInventory.js`)
- **初期在庫**: CSV（1月末時点）
- **履歴計算**: 2月1日以降の `localStorage` ログ（IN/OUT/ADJUST）を積み上げ計算。
- **ロット抽出**: 入庫ログからユニークなロットを収集し、新しい順に表示。

## 3. 運用ルール
- データの整合性を保つため、DB直接操作ではなくアプリUIを使用すること。
- 在庫数が合わない場合は「在庫数修正」ボタンを使用すること。

----
This document serves as the absolute reference for the project (v8.3).
